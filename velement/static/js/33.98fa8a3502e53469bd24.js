webpackJsonp([33],{132:function(e,t,a){function n(e){a(475)}var r=a(37)(a(291),a(558),n,"data-v-b9b9e0f8",null);e.exports=r.exports},291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{userName:"",CustomerValue:"",BrandValue:"",dialogFormVisible:!1,tableData:[],pagination:{currentPage:1,pageSizes:[5,10,20,30,50],pageSize:5,total:400},searchOptions:{options:{customerNameOptions:[],brandNameOptions:[],userNameOptions:[]}},multipleSelection:[],rules:{userName:[{required:!0,message:"请选择用户",trigger:"change"}],brandName:[{required:!0,message:"请选择品牌",trigger:"change"}],customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}]},ruleForm:{userName:"",brandName:"",brandId:"",customerName:"",customerId:"",name:"",id:"",options:{customerNameOptions:[{id:0,name:"*"}],brandNameOptions:[{id:0,name:"*"}],userNameOptions:[{id:0,name:"*"}]}}}},created:function(){var e=this,t=this;t.$axios.get(window.$config.HOST+"/baseInfoManagement/getBrandName ",{customerId:""}).then(function(t){t.data.forEach(function(t){e.searchOptions.options.brandNameOptions.push(t)})}).catch(function(t){e.$message({message:"获取品牌信息失败",type:"error"})}),t.$axios.get(window.$config.HOST+"/baseInfoManagement/getCustomerName").then(function(t){t.data.forEach(function(t){e.searchOptions.options.customerNameOptions.push(t),e.ruleForm.options.customerNameOptions.push(t)})}).catch(function(t){e.$message({message:"获取顾客信息失败",type:"error"})}),t.$axios.get(window.$config.HOST+"/baseInfoManagement/getUserList").then(function(t){console.log("获得品牌信息成功了"),e.tableData=t.data}).catch(function(t){e.tableData=[{userName:"张三",customerName:"客户A",brandName:"品牌A"},{userName:"张三",customerName:"客户2",brandName:"品牌2"},{userName:"张三",customerName:"客户A",brandName:"品牌3"},{userName:"张三",customerName:"客户A",brandName:"品牌4"}]}),this.$axios.post(window.$config.HOST+"/infoManagement/getUserName",{}).then(function(t){t.data.forEach(function(t){e.searchOptions.options.userNameOptions.push(t),e.ruleForm.options.userNameOptions.push(t)})}).catch(function(t){[{id:1,name:"李四"},{id:2,name:"王二"},{id:3,name:"张三"}].forEach(function(t){e.searchOptions.options.userNameOptions.push(t),e.ruleForm.options.userNameOptions.push(t)})})},methods:{deleteRangeData:function(e,t){var a=this;console.log("点击了本行的删除"),console.log("当前row=",e.rangeNumber);e.id;this.$confirm("是否确认删除该系列？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete(window.$config.HOST+"/infoManagement/deleteRange").then(function(e){a.handleSearch(),e.data<0?a.$message({message:"删除失败",type:"error"}):a.$message({message:"删除成功",type:"success"})}).catch(function(e){a.handleSearch(),a.$message({message:"删除2失败",type:"error"})})}).catch(function(){a.$message({message:"删除3失败",type:"error"})})},changeCheckBoxFun:function(e){this.multipleSelection=e},deleteUser:function(){var e=this,t=this;0===t.multipleSelection.length?this.$message({message:"请选择要删除的系列数据",type:"warning"}):t.multipleSelection.length>=1&&(console.log("有"+t.multipleSelection.length+"条数据被选中"),this.$confirm("删除所选的"+t.multipleSelection.length+"条系列信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.multipleSelection.forEach(function(t){console.log(t.id),e.$axios.delete(window.$config.HOST+"/infoManagement/deleteUser").then(function(t){e.handleSearch(),t.data<0?e.$message({message:"删除失败",type:"error"}):e.$message({message:"删除成功",type:"success"})}).catch(function(t){e.handleSearch(),e.$message({message:"删除失败",type:"error"})})})}).catch(function(){e.handleSearch(),e.$message({type:"info",message:"已取消删除"})}))},clientSelect2:function(){var e=this;this.ruleForm.brandName="";var t={customerId:this.ruleForm.customerName};console.log(t),this.$axios.get(window.$config.HOST+"/baseInfoManagement/getBrandName",{params:t}).then(function(t){console.log(t.data),e.ruleForm.options.brandNameOptions=t.data}).catch(function(t){e.$message({message:"获取品牌信息失败",type:"error"})})},addUser:function(){this.dialogFormVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?t.$axios.post(window.$config.HOST+"/infoManagement/addUser",{userId:t.ruleForm.userName,brandId:t.ruleForm.brandName,customerId:t.ruleForm.customerName}).then(function(e){e.data<0?t.$message({message:"添加失败",type:"warning"}):(t.handleSearch(),t.ruleForm.customerName="",t.ruleForm.brandName="",t.ruleForm.userName="",t.dialogFormVisible=!1,t.$message({message:"添加成功",type:"success"}))}).catch(function(e){t.handleSearch(),t.$message({message:"添加失败",type:"error"})}):t.$message({message:"请填写必须填写的项！",type:"error"})})},cancel:function(){this.ruleForm.customerName="",this.ruleForm.brandName="",this.ruleForm.userName="",this.dialogFormVisible=!1}}}},428:function(e,t,a){t=e.exports=a(123)(!0),t.push([e.i,".box-card[data-v-b9b9e0f8]{margin:20px 50px;padding:0 20px}.box-card .bar[data-v-b9b9e0f8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.box-card .bar .title[data-v-b9b9e0f8]{font-size:14px;min-width:75px;text-align:center}.box-card .bar .el-input[data-v-b9b9e0f8],.box-card .bar .el-select[data-v-b9b9e0f8]{width:300px;min-width:75px}.box-card .block[data-v-b9b9e0f8]{padding:30px 0;text-align:center}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/page/backEndModule/privilegeManagement.vue"],names:[],mappings:"AACA,2BACE,iBAAkB,AAClB,cAAgB,CACjB,AACD,gCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,UAAY,CACb,AACD,uCACE,eAAgB,AAChB,eAAgB,AAChB,iBAAmB,CACpB,AAKD,qFAHE,YAAa,AACb,cAAgB,CAKjB,AACD,kCACE,eAAgB,AAChB,iBAAmB,CACpB",file:"privilegeManagement.vue",sourcesContent:["\n.box-card[data-v-b9b9e0f8] {\n  margin: 20px 50px;\n  padding: 0 20px;\n}\n.box-card .bar[data-v-b9b9e0f8] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  width: 100%;\n}\n.box-card .bar .title[data-v-b9b9e0f8] {\n  font-size: 14px;\n  min-width: 75px;\n  text-align: center;\n}\n.box-card .bar .el-input[data-v-b9b9e0f8] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .bar .el-select[data-v-b9b9e0f8] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .block[data-v-b9b9e0f8] {\n  padding: 30px 0;\n  text-align: center;\n}\n"],sourceRoot:""}])},475:function(e,t,a){var n=a(428);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(124)("d5123eba",n,!0)},558:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("el-card",{staticClass:"box-card"},[a("el-row",{staticStyle:{"margin-top":"5px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("用户")]),e._v(" "),a("el-select",{attrs:{clearable:!0},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}},e._l(e.searchOptions.options.userNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("客户名称")]),e._v(" "),a("el-select",{attrs:{clearable:!0},model:{value:e.CustomerValue,callback:function(t){e.CustomerValue=t},expression:"CustomerValue"}},e._l(e.searchOptions.options.customerNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("品牌")]),e._v(" "),a("el-select",{attrs:{clearable:!0},model:{value:e.BrandValue,callback:function(t){e.BrandValue=t},expression:"BrandValue"}},e._l(e.searchOptions.options.brandNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"table"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加用户")])],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v("删除用户")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"max-height":"400",stripe:!0,"highlight-current-row":!0},on:{"selection-change":e.changeCheckBoxFun}},[a("el-table-column",{attrs:{type:"selection",width:"50px",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",width:"200",label:"用户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerName",width:"200",label:"客户名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"brandName",width:"200",label:"品牌",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteRangeData(t.row,t.index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pagination,"currentPage",t)}}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{modal:!1,title:"新增用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{staticStyle:{"margin-top":"5px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"用户",prop:"userName"}},[a("el-select",{model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}},e._l(e.ruleForm.options.userNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户名称",prop:"customerName",placeholder:"请选择客户名称"}},[a("el-select",{on:{change:e.clientSelect2},model:{value:e.ruleForm.customerName,callback:function(t){e.$set(e.ruleForm,"customerName",t)},expression:"ruleForm.customerName"}},e._l(e.ruleForm.options.customerNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"brandName"}},[a("el-select",{model:{value:e.ruleForm.brandName,callback:function(t){e.$set(e.ruleForm,"brandName",t)},expression:"ruleForm.brandName"}},e._l(e.ruleForm.options.brandNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{margin:"50px 0 10px 0"}},[a("el-col",{attrs:{span:3,offset:10}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"info"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=33.98fa8a3502e53469bd24.js.map
webpackJsonp([12],{160:function(e,a,t){function n(e){t(457)}var i=t(37)(t(319),t(526),n,"data-v-421c20ae",null);e.exports=i.exports},319:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{pagination:{currentPage:1,pageSizes:[10,20,30,40,50],pageSize:10,total:0},tableDataA:[],checked:0,ClientName:"",BrandName:"",ClothesType:"",Date1:"",Date2:"",SeriesName:"",SeriesGroupName:"",PlanName:"",OrderId:"",seriesGroup:[],client:[],brand:[],type:[],series:[],tableData:[],DataStartTime:"",DataEndTime:""}},created:function(){var e=this,a=this;a.$axios.get(window.$config.HOST+"/infoManagement/getRangeName",{params:{brandId:""}}).then(function(a){e.series=a.data}).catch(function(a){e.$message({message:"获取系列名称失败",type:"error"})}),a.$axios.get(window.$config.HOST+"/baseInfoManagement/getBrandName",{parmas:{customerId:""}}).then(function(a){e.brand=a.data}).catch(function(a){e.$message({message:"获取品牌名称失败",type:"error"})}),a.$axios.get(window.$config.HOST+"/infoManagement/getStyleGroupName",{params:{rangeId:""}}).then(function(a){e.seriesGroup=a.data}).catch(function(a){e.$message({message:"获取款式组名称失败",type:"error"})}),a.$axios.get(window.$config.HOST+"/baseInfoManagement/getCustomerName").then(function(a){e.client=a.data}).catch(function(a){e.$message({message:"获取客户名称失败",type:"error"})}),a.$axios.post(window.$config.HOST+"/infoManagement/getStyleGroupList",{customerId:null,brandId:null,rangeId:null,clothingLevelId:null,id:null,startDate:null,endDate:null}).then(function(a){console.log(a.data),a.data.forEach(function(a){!0===a.havePlan?a.stateName="已制定":!1===a.havePlan&&(a.stateName="未制定"),!0===a.havePredictPlan?a.predictState="已预测":!1===a.havePredictPlan&&(a.predictState="未预测");var t=new Date(a.createTime),n=t.toLocaleString();a.createTime=n,"未制定"===a.state&&e.tableData.push(a)}),e.pagination.total=e.tableData.length;var t=(e.pagination.currentPage-1)*e.pagination.pageSize,n=(e.pagination.currentPage-1)*e.pagination.pageSize;for(e.tableDataA=[];t-n<e.pagination.pageSize&&t<e.tableData.length;t++)e.tableDataA.push(e.tableData[t])}).catch(function(a){e.$message({message:"获取搜索结果失败",type:"error"})})},methods:{handleSizeChange:function(e){this.pagination.pageSize=e,console.log("每页+"+this.pagination.pageSize),this.searchStyleGroup()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.searchStyleGroup()},planTypeSwitchChange:function(){var e=this;console.log("ssssssssss="+this.checked);var a=this;this.DataStartTime=a.changeDate(this.Date1[0]),this.DataEndTime=a.changeDate(this.Date1[1]);var t={id:""===this.SeriesName?"":this.SeriesName,customerId:""===this.ClientName?"":this.ClientName,brandId:""===this.BrandName?"":this.BrandName,clothingLevelId:""===this.clothingLevelId?"":this.clothingLevelId,startDate:this.DataStartTime,endDate:this.DataEndTime};console.log(t),this.$axios.post(window.$config.HOST+"/infoManagement/getStyleGroupList",{id:""===this.SeriesName?null:this.SeriesName,customerId:""===this.ClientName?null:this.ClientName,brandId:""===this.BrandName?null:this.BrandName,clothingLevelId:""===this.clothingLevelId?null:this.clothingLevelId,startDate:this.DataStartTime,endDate:this.DataEndTime}).then(function(a){console.log(a.data);var t=a.data;e.tableData=[],t.forEach(function(a){console.log("这次havePlan的值为:"+a.havePlan);var t=new Date(a.createTime);!0===a.havePlan?a.stateName="已制定":!1===a.havePlan&&(a.stateName="未制定"),!0===a.havePredictPlan?a.predictState="已预测":!1===a.havePredictPlan&&(a.predictState="未预测");var t=new Date(a.createTime),n=t.toLocaleString();a.createTime=n,1==e.checked&&!1===a.havePlan?e.tableData.push(a):0==e.checked&&!0===a.havePlan&&e.tableData.push(a)}),e.pagination.total=e.tableData.length;var n=(e.pagination.currentPage-1)*e.pagination.pageSize,i=(e.pagination.currentPage-1)*e.pagination.pageSize;for(e.tableDataA=[];n-i<e.pagination.pageSize&&n<e.tableData.length;n++)e.tableDataA.push(e.tableData[n])}).catch(function(a){e.$message({message:"获取搜索结果失败",type:"error"})})},changeDate:function(e){if(console.log(e),e){var a=e.getFullYear(),t=e.getMonth()+1;t=t<10?"0"+t:t;var n=e.getDate();n=n<10?"0"+n:n;var i=e.getHours(),l=e.getMinutes();l=l<10?"0"+l:l;var r=e.getSeconds();return r=l<10?"0"+r:r,a+"-"+t+"-"+n+" "+i+":"+l+":"+r}return NaN},searchStyleGroup:function(){var e=this,a=this;this.DataStartTime=a.changeDate(this.Date1[0]),this.DataEndTime=a.changeDate(this.Date1[1]),this.$axios.post(window.$config.HOST+"/infoManagement/getStyleGroupList",{customerId:""===this.ClientName?null:this.ClientName,brandId:""===this.BrandName?null:this.BrandName,rangeId:""===this.SeriesName?null:this.SeriesName,clothingLevelId:null,id:""===this.SeriesGroupName?null:this.SeriesGroupName,startDate:this.DataStartTime,endDate:this.DataEndTime}).then(function(a){console.log(a.data),console.log("checked=",e.checked);var t=a.data;e.tableData=[],t.forEach(function(a){console.log("这次havePlan的值为:"+a.havePlan);var t=new Date(a.createTime);!0===a.havePlan?a.stateName="已制定":!1===a.havePlan&&(a.stateName="未制定"),!0===a.havePredictPlan?a.predictState="已预测":!1===a.havePredictPlan&&(a.predictState="未预测");var n=t.toLocaleString();a.createTime=n,0!=e.checked?1==e.checked&&!1===a.havePlan?e.tableData.push(a):2==e.checked&&!0===a.havePlan&&e.tableData.push(a):e.tableData.push(a)}),e.pagination.total=e.tableData.length;var n=(e.pagination.currentPage-1)*e.pagination.pageSize,i=(e.pagination.currentPage-1)*e.pagination.pageSize;for(e.tableDataA=[];n-i<e.pagination.pageSize&&n<e.tableData.length;n++)e.tableDataA.push(e.tableData[n])}).catch(function(a){var t=[{id:475342343,number:"KSZ201901sss01001",name:"款式1组",rangeId:48674231,rangeNumber:"XL20190101001",rangeName:"Fall-2019(07/08/09)",customerId:745341,customerName:"Qi-Collection",brandId:574531423,brandName:"Selkie",clothingLevelId:575123,clothingLevelName:"时装",createrName:"刘德华",deptName:"业务1组",createTime:"2019-01-01 10:15:01",state:"已下发",havePlan:1},{id:475342343,number:"KSZ20190101001",name:"款式1组",rangeId:48674231,rangeNumber:"XL20190101001",rangeName:"Fall-2019(07/08/09)",customerId:745341,customerName:"Qi-Collection",brandId:574531423,brandName:"Selkie",clothingLevelId:575123,clothingLevelName:"时装",createrName:"刘德华",deptName:"业务1组",createTime:"2019-01-01 10:15:01",state:"已下发",havePlan:1}];e.tableData=t})},ClearChanged:function(e){this.$refs.singleTable.setCurrentRow(e)},QuoteSeriesPlan:function(e){var a=this,t=this;console.log(e.id);var n={styleGroupId:e.id,rangeId:e.rangeId};t.$axios.post(window.$config.HOST+"/planManagement/quoteRangePlan",n).then(function(e){console.log("repsonse="+e.data),e.data>0?a.$message({message:"引用预测成功",type:"success"}):a.$message({message:"引用预测失败",type:"warning"})}).catch(function(e){console.log("repsonse="),a.$message({message:"引用预测失败！",type:"error"})})},ToPlanForm:function(e){if(!0===e.havePlan)return void this.$message({message:"该计划已经被制定",type:"warning"});this.$router.push({name:"planMakeIndex",params:{flag:2,goback:"styleGroupPlanMake",client:e.customerName,brand:e.brandName,series:e.rangeName,plantype:2,id:e.id,planobj:e.name,TopPlan:0,TopPlanName:"根计划",planName:"",projectType:"",number:"",dataStart:"",dataEnd:"",productDate:"",productDateType:"",productId:"",proposal:"",note:"",description:""}})}}}},410:function(e,a,t){a=e.exports=t(123)(!0),a.push([e.i,".block[data-v-421c20ae]{padding:30px 0;text-align:center}.title[data-v-421c20ae]{min-width:100px}.Mtitle[data-v-421c20ae]{-ms-flex-line-pack:center;align-content:center;margin-left:42%;font-size:2ch}.box-card[data-v-421c20ae]{margin:20px 50px;padding:0 20px}.box-card .el-row[data-v-421c20ae]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px}.box-card .el-row .MinW[data-v-421c20ae]{min-width:400px}.box-card .el-row .bar[data-v-421c20ae]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.box-card .el-row .bar .title[data-v-421c20ae]{font-size:14px;min-width:100px;text-align:center}.box-card .el-row .bar .el-input[data-v-421c20ae],.box-card .el-row .bar .el-select[data-v-421c20ae]{width:70%;min-width:80px;margin-left:20px}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/page/planManagement/styleGroupPlanMake .vue"],names:[],mappings:"AACA,wBACE,eAAgB,AAChB,iBAAmB,CACpB,AACD,wBACE,eAAiB,CAClB,AACD,yBACE,0BAA2B,AACvB,qBAAsB,AAC1B,gBAAiB,AACjB,aAAe,CAChB,AACD,2BACE,iBAAkB,AAClB,cAAgB,CACjB,AACD,mCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,kBAAoB,CACrB,AACD,yCACE,eAAiB,CAClB,AACD,wCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAC7B,AACD,+CACE,eAAgB,AAChB,gBAAiB,AACjB,iBAAmB,CACpB,AAMD,qGACE,UAAW,AACX,eAAgB,AAChB,gBAAkB,CACnB",file:"styleGroupPlanMake .vue",sourcesContent:["\n.block[data-v-421c20ae] {\n  padding: 30px 0;\n  text-align: center;\n}\n.title[data-v-421c20ae] {\n  min-width: 100px;\n}\n.Mtitle[data-v-421c20ae] {\n  -ms-flex-line-pack: center;\n      align-content: center;\n  margin-left: 42%;\n  font-size: 2ch;\n}\n.box-card[data-v-421c20ae] {\n  margin: 20px 50px;\n  padding: 0 20px;\n}\n.box-card .el-row[data-v-421c20ae] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-bottom: 20px;\n}\n.box-card .el-row .MinW[data-v-421c20ae] {\n  min-width: 400px;\n}\n.box-card .el-row .bar[data-v-421c20ae] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.box-card .el-row .bar .title[data-v-421c20ae] {\n  font-size: 14px;\n  min-width: 100px;\n  text-align: center;\n}\n.box-card .el-row .bar .el-input[data-v-421c20ae] {\n  width: 70%;\n  min-width: 80px;\n  margin-left: 20px;\n}\n.box-card .el-row .bar .el-select[data-v-421c20ae] {\n  width: 70%;\n  min-width: 80px;\n  margin-left: 20px;\n}\n"],sourceRoot:""}])},457:function(e,a,t){var n=t(410);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t(124)("2e8dbe7a",n,!0)},526:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"body"},[t("el-card",{staticClass:"box-card"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"bar"},[t("div",{staticClass:"title"},[e._v("客户名称")]),e._v(" "),t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ClientName,callback:function(a){e.ClientName=a},expression:"ClientName"}},e._l(e.client,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"bar"},[t("div",{staticClass:"title"},[e._v("品牌")]),e._v(" "),t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.BrandName,callback:function(a){e.BrandName=a},expression:"BrandName"}},e._l(e.brand,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"bar"},[t("div",{staticClass:"title"},[e._v("系列名称")]),e._v(" "),t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.SeriesName,callback:function(a){e.SeriesName=a},expression:"SeriesName"}},e._l(e.series,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"bar"},[t("div",{staticClass:"title"},[e._v("添加时间")]),e._v(" "),t("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.Date1,callback:function(a){e.Date1=a},expression:"Date1"}})],1)]),e._v(" "),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"bar"},[t("div",{staticClass:"title"},[e._v("款式组名称")]),e._v(" "),t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.SeriesGroupName,callback:function(a){e.SeriesGroupName=a},expression:"SeriesGroupName"}},e._l(e.seriesGroup,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),t("el-col",{staticClass:"MinW",staticStyle:{"margin-left":"30px"},attrs:{span:5}},[t("el-switch",{attrs:{"inactive-color":"#13ce66","inactive-text":"未制定","active-text":"已制定"},on:{change:e.planTypeSwitchChange},model:{value:e.checked,callback:function(a){e.checked=a},expression:"checked"}}),e._v(" "),t("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.searchStyleGroup}},[e._v("搜索")])],1)],1)],1),e._v(" "),t("el-card",{staticClass:"box-card"},[t("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableDataA}},[t("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"number",label:"款式组编号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"款式组名称",align:"center",width:"100px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"rangeNumber",label:"系列编号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"customerName",label:"客户名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"brandName",label:"品牌",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"clothingLevelName",label:"服装层次",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"rangeName",label:"系列名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createrName",label:"添加人",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"deptName",label:"部门",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"stateName",label:"是否制定计划",align:"center"}}),e._v(" "),!1===e.checked?t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.QuoteSeriesPlan(a.row)}}},[e._v("引用系列计划")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.ToPlanForm(a.row)}}},[e._v("制定计划")])]}}])}):e._e()],1),e._v(" "),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.$set(e.pagination,"currentPage",a)}}})],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=12.38aaea6467b9525bc8f6.js.map